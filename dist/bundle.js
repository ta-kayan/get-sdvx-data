(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
javascript:"use strict";var __awaiter=this&&this.__awaiter||function(e,l,i,c){return new(i=i||Promise)(function(t,o){function r(e){try{a(c.next(e))}catch(e){o(e)}}function n(e){try{a(c.throw(e))}catch(e){o(e)}}function a(e){var o;e.done?t(e.value):((o=e.value)instanceof i?o:new i(function(e){e(o)})).then(r,n)}a((c=c.apply(e,l||[])).next())})},__asyncValues=this&&this.__asyncValues||function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,o=l[Symbol.asyncIterator];return o?o.call(l):(l="function"==typeof __values?__values(l):l[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(a){e[a]=l[a]&&function(n){return new Promise(function(e,o){var t,r;n=l[a](n),t=e,e=o,r=n.done,o=n.value,Promise.resolve(o).then(function(e){t({value:e,done:r})},e)})}}};__awaiter(void 0,void 0,void 0,function*(){var o,e,t,r="userDataLv12_";let a="search_level=10&method=3",n;const l="https://p.eagate.573.jp/game/sdvx/vi/playdata/rival/search.html",i={search_level:12};let c=new FormData;c.append("search_level",12..toString()),c.append("method","3");for(t of c.entries())console.log(t);var s=l;const d=yield fetch(s,{method:"POST",headers:{Accept:"*/*",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded;charset=UTF_8",Cookie:document.cookie},body:a,credentials:"include",referrerPolicy:"strict-origin-when-cross-origin"});var s=yield d.arrayBuffer(),s=new TextDecoder("windows-31j").decode(s),p=(console.log(s),r+2..toString()+".html"),s=(new Blob([s],{type:"text/plan"}),(c=new FormData).append("file",s),c.append("name",p),c.append("filelist",12..toString()),"http://127.0.0.1:3000/uploadwithId/1apFrGKjW7uUyDYG9_vsx8Uy9wMCcM_QT"),p=(console.log(s),yield $.ajax({url:s,type:"POST",data:c,contentType:!1,processData:!1,success:function(e,o){console.log("Success",e)},error:function(e,o,t){console.log("Error : "+t)}}),"http://127.0.0.1:3000/getplayerwithId/1FWGlmbovuS4Rcq4vCbQSUFJdzLBNiHRN"),s=(console.log("postUrlCsv",p),c=new FormData,r+2..toString()+".html"),r="playerLv12__"+2..toString()+".csv";c.append("htmlfilename",s),c.append("csvfilename",r),yield $.ajax({url:p,type:"POST",data:c,contentType:!1,processData:!1,success:function(e,o){n=e.split(","),console.log("type",typeof n),console.log("array",n)},error:function(e,o,t){console.log("Error : "+t)}});let u=1;try{for(var y,f=__asyncValues(n);!(y=yield f.next()).done;){let e=y.value;1==u&&(e=e.split('"')[1]),u+=1;const l="https://p.eagate.573.jp/game/sdvx/vi/playdata/rival/score.html?sort_id=0&page=",i=(console.log("player",e),{rival_id:e}),a=Object.keys(i).map(e=>e+"="+encodeURIComponent(i.rival_id)).join("&");console.log("body",a);let r="",n;for(let t=1;t<89;t++){var h="https://p.eagate.573.jp/game/sdvx/vi/playdata/rival/score.html?sort_id=0&page="+t.toString();try{n=yield fetch(h,{method:"POST",headers:{Accept:"*/*",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded;charset=UTF_8",Cookie:document.cookie},body:a,credentials:"include",referrerPolicy:"strict-origin-when-cross-origin"})}catch(e){console.log("user score data error"),yield new Promise(e=>setTimeout(e,3e4));continue}var v=yield n.arrayBuffer(),m=new TextDecoder("windows-31j").decode(v),g=i.rival_id+"_"+t.toString()+".html";let e=new FormData;e.append("file",m),e.append("name",g);let o;if(1==t)o="http://127.0.0.1:3000/upload/"+i.rival_id,e.append("parentId","1iTNvJiPEngByunyd083e93tLGHOwgSSn"),console.log(o),yield $.ajax({url:o,type:"POST",data:e,contentType:!1,processData:!1,success:function(e,o){console.log("Success",e),e=JSON.parse(e),console.log(e.data),r=e.data.dirId},error:function(e,o,t){console.log("Error : "+t)}});else{o="http://127.0.0.1:3000/uploadwithId/"+r;try{yield $.ajax({url:o,type:"POST",data:e,contentType:!1,processData:!1,success:function(e,o){console.log("Success",e)},error:function(e,o,t){console.log("Error : "+t)}})}catch(e){console.log("user score data upload error"),yield new Promise(e=>setTimeout(e,3e4));continue}}}var w="https://p.eagate.573.jp/game/sdvx/vi/playdata/rival/profile.html?rival_id="+e;console.log("user profile url",w),console.log("player",e);try{n=yield fetch(w,{method:"GET",headers:{Accept:"*/*",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded;charset=UTF_8",Cookie:document.cookie},body:a,credentials:"include",referrerPolicy:"strict-origin-when-cross-origin"})}catch(e){console.log("user profile data get error"),yield new Promise(e=>setTimeout(e,3e4));continue}var _=yield n.arrayBuffer(),T=new TextDecoder("windows-31j").decode(_),S=i.rival_id+"_profile.html";let o=new FormData;o.append("file",T),o.append("name",S);var x="http://127.0.0.1:3000/uploadwithId/"+r;try{yield $.ajax({url:x,type:"POST",data:o,contentType:!1,processData:!1,success:function(e,o){console.log("Success",e)},error:function(e,o,t){console.log("Error : "+t)}})}catch(e){console.log("user score data upload error"),yield new Promise(e=>setTimeout(e,3e4));continue}}}catch(e){o={error:e}}finally{try{y&&!y.done&&(e=f.return)&&(yield e.call(f))}finally{if(o)throw o.error}}});
},{}]},{},[1]);
