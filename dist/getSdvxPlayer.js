javascript:"use strict";var __awaiter=this&&this.__awaiter||function(e,l,c,i){return new(c=c||Promise)(function(t,o){function r(e){try{a(i.next(e))}catch(e){o(e)}}function n(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var o;e.done?t(e.value):((o=e.value)instanceof c?o:new c(function(e){e(o)})).then(r,n)}a((i=i.apply(e,l||[])).next())})},__asyncValues=this&&this.__asyncValues||function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,o=l[Symbol.asyncIterator];return o?o.call(l):(l="function"==typeof __values?__values(l):l[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(a){e[a]=l[a]&&function(n){return new Promise(function(e,o){var t,r;n=l[a](n),t=e,e=o,r=n.done,o=n.value,Promise.resolve(o).then(function(e){t({value:e,done:r})},e)})}}};__awaiter(void 0,void 0,void 0,function*(){var o,e,t,r="userDataLv12_";let a="search_level=10&method=3",n;const l="https://p.eagate.573.jp/game/sdvx/vi/playdata/rival/search.html",c={search_level:12};let i=new FormData;i.append("search_level",12..toString()),i.append("method","3");for(t of i.entries())console.log(t);var s=l;const d=yield fetch(s,{method:"POST",headers:{Accept:"*/*",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded;charset=UTF_8",Cookie:document.cookie},body:a,credentials:"include",referrerPolicy:"strict-origin-when-cross-origin"});var s=yield d.arrayBuffer(),s=new TextDecoder("windows-31j").decode(s),p=(console.log(s),r+2..toString()+".html"),s=(new Blob([s],{type:"text/plan"}),(i=new FormData).append("file",s),i.append("name",p),i.append("filelist",12..toString()),"http://127.0.0.1:3000/uploadwithId/1pSv6nos10Lw2XqNDC1Q4MReIwlq66_OT"),p=(console.log(s),yield $.ajax({url:s,type:"POST",data:i,contentType:!1,processData:!1,success:function(e,o){console.log("Success",e)},error:function(e,o,t){console.log("Error : "+t)}}),"http://127.0.0.1:3000/getplayerwithId/1sQPxieV8vOTB7Vf5nYHrTkycU7GLEgh4"),s=(console.log("postUrlCsv",p),i=new FormData,r+2..toString()+".html");i.append("htmlfilename",s),i.append("csvfilename","playerLv12.csv"),yield $.ajax({url:p,type:"POST",data:i,contentType:!1,processData:!1,success:function(e,o){n=e.split(","),console.log("type",typeof n),console.log("array",n)},error:function(e,o,t){console.log("Error : "+t)}});let u=1;try{for(var y,h=__asyncValues(n);!(y=yield h.next()).done;){let e=y.value;1==u&&(e=e.split('"')[1]),u+=1;const l="https://p.eagate.573.jp/game/sdvx/vi/playdata/rival/score.html?sort_id=0&page=",c=(console.log("player",e),{rival_id:e}),a=Object.keys(c).map(e=>e+"="+encodeURIComponent(c.rival_id)).join("&");console.log("body",a);let r="",n;for(let t=1;t<89;t++){var f="https://p.eagate.573.jp/game/sdvx/vi/playdata/rival/score.html?sort_id=0&page="+t.toString();try{n=yield fetch(f,{method:"POST",headers:{Accept:"*/*",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded;charset=UTF_8",Cookie:document.cookie},body:a,credentials:"include",referrerPolicy:"strict-origin-when-cross-origin"})}catch(e){console.log("user score data error"),yield new Promise(e=>setTimeout(e,3e4));continue}var v=yield n.arrayBuffer(),m=new TextDecoder("windows-31j").decode(v),g=c.rival_id+"_"+t.toString()+".html";let e=new FormData;e.append("file",m),e.append("name",g);let o;if(1==t)o="http://127.0.0.1:3000/upload/"+c.rival_id,e.append("parentId","1AL8RzB4SJ83_afsa-VthwUAVA13jzpxt"),console.log(o),yield $.ajax({url:o,type:"POST",data:e,contentType:!1,processData:!1,success:function(e,o){console.log("Success",e),e=JSON.parse(e),console.log(e.data),r=e.data.dirId},error:function(e,o,t){console.log("Error : "+t)}});else{o="http://127.0.0.1:3000/uploadwithId/"+r;try{yield $.ajax({url:o,type:"POST",data:e,contentType:!1,processData:!1,success:function(e,o){console.log("Success",e)},error:function(e,o,t){console.log("Error : "+t)}})}catch(e){console.log("user score data upload error"),yield new Promise(e=>setTimeout(e,3e4));continue}}}var w="https://p.eagate.573.jp/game/sdvx/vi/playdata/rival/profile.html?rival_id="+e;console.log("player",e);try{n=yield fetch(w,{method:"GET",headers:{Accept:"*/*",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded;charset=UTF_8",Cookie:document.cookie},body:a,credentials:"include",referrerPolicy:"strict-origin-when-cross-origin"})}catch(e){console.log("user data get error"),yield new Promise(e=>setTimeout(e,3e4));continue}var _=yield n.arrayBuffer(),T=new TextDecoder("windows-31j").decode(_),S=c.rival_id+"_profile.html";let o=new FormData;o.append("file",T),o.append("name",S);var x="http://127.0.0.1:3000/uploadwithId/"+r;try{yield $.ajax({url:x,type:"POST",data:o,contentType:!1,processData:!1,success:function(e,o){console.log("Success",e)},error:function(e,o,t){console.log("Error : "+t)}})}catch(e){console.log("user score data upload error"),yield new Promise(e=>setTimeout(e,3e4));continue}}}catch(e){o={error:e}}finally{try{y&&!y.done&&(e=h.return)&&(yield e.call(h))}finally{if(o)throw o.error}}});